package RepoParser
import RepoParser.JSONParser
import org.apache.http.client.methods.HttpPost
import org.apache.http.entity.StringEntity
import org.apache.http.impl.client.HttpClientBuilder
import org.json4s.DefaultFormats
import org.json4s.jackson.JsonMethods.parse

import scala.io.Source.fromInputStream
object WisamTest extends App {
  val BASE_GHQL_URL = "https://api.github.com/graphql"
  val temp = "{viewer {email login url}}"
  val repos = gitHubObject.client_data.repos

  val client = HttpClientBuilder.create.build
  val httpUriRequest = new HttpPost(BASE_GHQL_URL)
  httpUriRequest.addHeader("Authorization", "Bearer 1afa88fcf01fba7bbb8ee3f611488f7d0e9cca1e")//9664303b5648c5c66d68a5b10880dd490c9ac832")
  httpUriRequest.addHeader("Accept", "application/json")
  val gqlReq = new StringEntity("{" +
    "   \"query\":      \"" + repos + "\", " +
    "   \"operationName\": \"ObtainRepos\",  " +
    "   \"variables\":  { \"allRepos\": true } " +
    "}")
  httpUriRequest.setEntity(gqlReq)

  val response = client.execute(httpUriRequest)

  response.getEntity match {
    case null => System.out.println("Response entity is null")
    case x if x != null => {
      val respJson = fromInputStream(x.getContent).mkString
      //print(respJson)


      val respJson2 = "{\n  \"data\": {\n    \"viewer\": {\n      \"RepositoriesConnections\": {\n        \"Repo\": [\n          {\n            \"repoName\": \"Jalomo1197.github.io\",\n            \"nameWithOwner\": \"Jalomo1197/Jalomo1197.github.io\",\n            \"createdDate\": \"2019-02-04T14:46:23Z\",\n            \"lastPushed\": \"2020-04-28T01:55:37Z\",\n            \"description\": null,\n            \"primaryLanguage\": {\n              \"language\": \"JavaScript\"\n            },\n            \"owner\": {\n              \"loginName\": \"Jalomo1197\"\n            },\n            \"forks\": {\n              \"totalCount\": 0\n            },\n            \"languagesConnection\": {\n              \"programingLanguages\": [\n                {\n                  \"language\": \"HTML\"\n                },\n                {\n                  \"language\": \"CSS\"\n                },\n                {\n                  \"language\": \"JavaScript\"\n                }\n              ]\n            },\n            \"stargazersConnection\": {\n              \"totalCount\": 0\n            },\n            \"collaboratorsConnection\": {\n              \"totalCount\": 1,\n              \"collaborators\": [\n                {\n                  \"name\": \"Alexis Jalomo\",\n                  \"loginName\": \"Jalomo1197\"\n                }\n              ]\n            },\n            \"pullRequestsConnection\": {\n              \"totalCount\": 0,\n              \"pullRequestsList\": []\n            },\n            \"commitComments\": {\n              \"totalCount\": 0\n            }\n          },\n          {\n            \"repoName\": \"hello_world\",\n            \"nameWithOwner\": \"jsanchez78/hello_world\",\n            \"createdDate\": \"2019-05-21T20:16:13Z\",\n            \"lastPushed\": \"2019-05-28T18:16:46Z\",\n            \"description\": null,\n            \"primaryLanguage\": null,\n            \"owner\": {\n              \"loginName\": \"jsanchez78\"\n            },\n            \"forks\": {\n              \"totalCount\": 0\n            },\n            \"languagesConnection\": {\n              \"programingLanguages\": []\n            },\n            \"stargazersConnection\": {\n              \"totalCount\": 0\n            },\n            \"collaboratorsConnection\": {\n              \"totalCount\": 3,\n              \"collaborators\": [\n                {\n                  \"name\": \"Luis Sanchez\",\n                  \"loginName\": \"jsanchez78\"\n                },\n                {\n                  \"name\": \"Alexis Jalomo\",\n                  \"loginName\": \"Jalomo1197\"\n                },\n                {\n                  \"name\": \"Shuke\",\n                  \"loginName\": \"kwerte\"\n                }\n              ]\n            },\n            \"pullRequestsConnection\": {\n              \"totalCount\": 1,\n              \"pullRequestsList\": [\n                {\n                  \"title\": \"Add files via upload\",\n                  \"author\": {\n                    \"userLogin\": \"jsanchez78\"\n                  },\n                  \"createdDate\": \"2019-05-28T18:16:45Z\",\n                  \"filesConnection\": {\n                    \"files\": [\n                      {\n                        \"path\": \"web_scraping_statistics/manage.py\"\n                      },\n                      {\n                        \"path\": \"web_scraping_statistics/web_scraping_statistics/__pycache__/__init__.cpython-37.pyc\"\n                      }\n                    ]\n                  }\n                }\n              ]\n            },\n            \"commitComments\": {\n              \"totalCount\": 0\n            }\n          },\n          {\n            \"repoName\": \"DaBoysWe\",\n            \"nameWithOwner\": \"EmilioAVazquez/DaBoysWe\",\n            \"createdDate\": \"2019-08-20T22:25:14Z\",\n            \"lastPushed\": \"2019-10-24T21:47:53Z\",\n            \"description\": null,\n            \"primaryLanguage\": {\n              \"language\": \"C#\"\n            },\n            \"owner\": {\n              \"loginName\": \"EmilioAVazquez\"\n            },\n            \"forks\": {\n              \"totalCount\": 0\n            },\n            \"languagesConnection\": {\n              \"programingLanguages\": [\n                {\n                  \"language\": \"C#\"\n                }\n              ]\n            },\n            \"stargazersConnection\": {\n              \"totalCount\": 1\n            },\n            \"collaboratorsConnection\": {\n              \"totalCount\": 7,\n              \"collaborators\": [\n                {\n                  \"name\": \"Luis Sanchez\",\n                  \"loginName\": \"jsanchez78\"\n                },\n                {\n                  \"name\": \"Emilio Vázquez\",\n                  \"loginName\": \"EmilioAVazquez\"\n                },\n                {\n                  \"name\": \"Daniel Johnston\",\n                  \"loginName\": \"AdraxXX\"\n                },\n                {\n                  \"name\": \"Alexis Jalomo\",\n                  \"loginName\": \"Jalomo1197\"\n                },\n                {\n                  \"name\": \"Shuke\",\n                  \"loginName\": \"kwerte\"\n                },\n                {\n                  \"name\": \"bear\",\n                  \"loginName\": \"WarlordGandhi24\"\n                },\n                {\n                  \"name\": null,\n                  \"loginName\": \"ahando2\"\n                }\n              ]\n            },\n            \"pullRequestsConnection\": {\n              \"totalCount\": 3,\n              \"pullRequestsList\": [\n                {\n                  \"title\": \"Update GraphQL.cs\",\n                  \"author\": {\n                    \"userLogin\": \"jsanchez78\"\n                  },\n                  \"createdDate\": \"2019-08-21T00:57:06Z\",\n                  \"filesConnection\": {\n                    \"files\": [\n                      {\n                        \"path\": \"GraphQL/GraphQL.cs\"\n                      }\n                    ]\n                  }\n                },\n                {\n                  \"title\": \"Updating Current Patient Model\",\n                  \"author\": {\n                    \"userLogin\": \"AdraxXX\"\n                  },\n                  \"createdDate\": \"2019-10-10T20:06:13Z\",\n                  \"filesConnection\": {\n                    \"files\": [\n                      {\n                        \"path\": \"C4W/Models/Patient.cs\"\n                      }\n                    ]\n                  }\n                },\n                {\n                  \"title\": \"Request to Create Doctor Model\",\n                  \"author\": {\n                    \"userLogin\": \"AdraxXX\"\n                  },\n                  \"createdDate\": \"2019-10-10T20:07:57Z\",\n                  \"filesConnection\": {\n                    \"files\": [\n                      {\n                        \"path\": \"C4W/Models/Doctor.cs\"\n                      },\n                      {\n                        \"path\": \"C4W/Models/Patient.cs\"\n                      }\n                    ]\n                  }\n                }\n              ]\n            },\n            \"commitComments\": {\n              \"totalCount\": 0\n            }\n          },\n          {\n            \"repoName\": \"BaccaratGame\",\n            \"nameWithOwner\": \"Jalomo1197/BaccaratGame\",\n            \"createdDate\": \"2019-10-06T23:05:41Z\",\n            \"lastPushed\": \"2019-10-18T03:57:22Z\",\n            \"description\": null,\n            \"primaryLanguage\": {\n              \"language\": \"Java\"\n            },\n            \"owner\": {\n              \"loginName\": \"Jalomo1197\"\n            },\n            \"forks\": {\n              \"totalCount\": 0\n            },\n            \"languagesConnection\": {\n              \"programingLanguages\": [\n                {\n                  \"language\": \"Java\"\n                }\n              ]\n            },\n            \"stargazersConnection\": {\n              \"totalCount\": 0\n            },\n            \"collaboratorsConnection\": {\n              \"totalCount\": 2,\n              \"collaborators\": [\n                {\n                  \"name\": \"Alexis Jalomo\",\n                  \"loginName\": \"Jalomo1197\"\n                },\n                {\n                  \"name\": null,\n                  \"loginName\": \"hthayyil\"\n                }\n              ]\n            },\n            \"pullRequestsConnection\": {\n              \"totalCount\": 0,\n              \"pullRequestsList\": []\n            },\n            \"commitComments\": {\n              \"totalCount\": 0\n            }\n          },\n          {\n            \"repoName\": \"RockPaperScissors\",\n            \"nameWithOwner\": \"hthayyil/RockPaperScissors\",\n            \"createdDate\": \"2019-10-27T21:24:40Z\",\n            \"lastPushed\": \"2019-10-27T21:31:39Z\",\n            \"description\": null,\n            \"primaryLanguage\": {\n              \"language\": \"Java\"\n            },\n            \"owner\": {\n              \"loginName\": \"hthayyil\"\n            },\n            \"forks\": {\n              \"totalCount\": 0\n            },\n            \"languagesConnection\": {\n              \"programingLanguages\": [\n                {\n                  \"language\": \"Java\"\n                }\n              ]\n            },\n            \"stargazersConnection\": {\n              \"totalCount\": 0\n            },\n            \"collaboratorsConnection\": {\n              \"totalCount\": 2,\n              \"collaborators\": [\n                {\n                  \"name\": \"Alexis Jalomo\",\n                  \"loginName\": \"Jalomo1197\"\n                },\n                {\n                  \"name\": null,\n                  \"loginName\": \"hthayyil\"\n                }\n              ]\n            },\n            \"pullRequestsConnection\": {\n              \"totalCount\": 0,\n              \"pullRequestsList\": []\n            },\n            \"commitComments\": {\n              \"totalCount\": 0\n            }\n          },\n          {\n            \"repoName\": \"MatchMaking_RPSLS\",\n            \"nameWithOwner\": \"Jalomo1197/MatchMaking_RPSLS\",\n            \"createdDate\": \"2019-10-29T22:37:41Z\",\n            \"lastPushed\": \"2019-11-10T00:06:46Z\",\n            \"description\": \"Using Java/JavaFX, built a Rock-Paper-Scissors-Lizard-Spock game server. Clients can see other online clients and challenge them to play. Once in a game, client disappears from the lobby until their game is finished/terminated. Clients return to the lobby after every game.\",\n            \"primaryLanguage\": {\n              \"language\": \"Java\"\n            },\n            \"owner\": {\n              \"loginName\": \"Jalomo1197\"\n            },\n            \"forks\": {\n              \"totalCount\": 0\n            },\n            \"languagesConnection\": {\n              \"programingLanguages\": [\n                {\n                  \"language\": \"Java\"\n                }\n              ]\n            },\n            \"stargazersConnection\": {\n              \"totalCount\": 0\n            },\n            \"collaboratorsConnection\": {\n              \"totalCount\": 2,\n              \"collaborators\": [\n                {\n                  \"name\": \"Alexis Jalomo\",\n                  \"loginName\": \"Jalomo1197\"\n                },\n                {\n                  \"name\": null,\n                  \"loginName\": \"hthayyil\"\n                }\n              ]\n            },\n            \"pullRequestsConnection\": {\n              \"totalCount\": 0,\n              \"pullRequestsList\": []\n            },\n            \"commitComments\": {\n              \"totalCount\": 0\n            }\n          },\n          {\n            \"repoName\": \"CS342_Project4\",\n            \"nameWithOwner\": \"kdrews34/CS342_Project4\",\n            \"createdDate\": \"2019-11-15T18:29:19Z\",\n            \"lastPushed\": \"2019-12-03T02:52:19Z\",\n            \"description\": null,\n            \"primaryLanguage\": {\n              \"language\": \"Java\"\n            },\n            \"owner\": {\n              \"loginName\": \"kdrews34\"\n            },\n            \"forks\": {\n              \"totalCount\": 0\n            },\n            \"languagesConnection\": {\n              \"programingLanguages\": [\n                {\n                  \"language\": \"Java\"\n                }\n              ]\n            },\n            \"stargazersConnection\": {\n              \"totalCount\": 0\n            },\n            \"collaboratorsConnection\": {\n              \"totalCount\": 4,\n              \"collaborators\": [\n                {\n                  \"name\": \"Kevin Andrews\",\n                  \"loginName\": \"kdrews34\"\n                },\n                {\n                  \"name\": \"Alexis Jalomo\",\n                  \"loginName\": \"Jalomo1197\"\n                },\n                {\n                  \"name\": \"Deividas Mickevicius\",\n                  \"loginName\": \"davidmickev\"\n                },\n                {\n                  \"name\": null,\n                  \"loginName\": \"hthayyil\"\n                }\n              ]\n            },\n            \"pullRequestsConnection\": {\n              \"totalCount\": 4,\n              \"pullRequestsList\": [\n                {\n                  \"title\": \"Delete Server.java\",\n                  \"author\": {\n                    \"userLogin\": \"kdrews34\"\n                  },\n                  \"createdDate\": \"2019-11-17T02:22:55Z\",\n                  \"filesConnection\": {\n                    \"files\": [\n                      {\n                        \"path\": \"P3Server/src/main/java/Server.java\"\n                      }\n                    ]\n                  }\n                },\n                {\n                  \"title\": \"added server main page gui stuff\",\n                  \"author\": {\n                    \"userLogin\": \"kdrews34\"\n                  },\n                  \"createdDate\": \"2019-11-21T00:05:58Z\",\n                  \"filesConnection\": {\n                    \"files\": [\n                      {\n                        \"path\": \"P3Server/src/main/java/RPLS.java\"\n                      }\n                    ]\n                  }\n                },\n                {\n                  \"title\": \"Dm\",\n                  \"author\": {\n                    \"userLogin\": \"kdrews34\"\n                  },\n                  \"createdDate\": \"2019-11-21T01:42:56Z\",\n                  \"filesConnection\": {\n                    \"files\": [\n                      {\n                        \"path\": \"P3Client/.idea/misc.xml\"\n                      },\n                      {\n                        \"path\": \"P3Client/.idea/vcs.xml\"\n                      },\n                      {\n                        \"path\": \"P3Client/.idea/workspace.xml\"\n                      },\n                      {\n                        \"path\": \"P3Client/src/main/java/RPLS.java\"\n                      },\n                      {\n                        \"path\": \"P3Client/src/main/resources/triangles.jpg\"\n                      },\n                      {\n                        \"path\": \"P3Client/target/classes/RPLS$1.class\"\n                      },\n                      {\n                        \"path\": \"P3Client/target/classes/RPLS$10.class\"\n                      },\n                      {\n                        \"path\": \"P3Client/target/classes/RPLS$11.class\"\n                      },\n                      {\n                        \"path\": \"P3Client/target/classes/RPLS$2.class\"\n                      },\n                      {\n                        \"path\": \"P3Client/target/classes/RPLS$3.class\"\n                      },\n                      {\n                        \"path\": \"P3Client/target/classes/RPLS$4.class\"\n                      },\n                      {\n                        \"path\": \"P3Client/target/classes/RPLS$5.class\"\n                      },\n                      {\n                        \"path\": \"P3Client/target/classes/RPLS$6.class\"\n                      },\n                      {\n                        \"path\": \"P3Client/target/classes/RPLS$7.class\"\n                      },\n                      {\n                        \"path\": \"P3Client/target/classes/RPLS$8.class\"\n                      },\n                      {\n                        \"path\": \"P3Client/target/classes/RPLS$9.class\"\n                      },\n                      {\n                        \"path\": \"P3Client/target/classes/RPLS$Client.class\"\n                      },\n                      {\n                        \"path\": \"P3Client/target/classes/RPLS.class\"\n                      },\n                      {\n                        \"path\": \"P3Client/target/classes/triangles.jpg\"\n                      },\n                      {\n                        \"path\": \"P3Client/target/maven-status/maven-compiler-plugin/compile/default-compile/inputFiles.lst\"\n                      }\n                    ]\n                  }\n                },\n                {\n                  \"title\": \"Kdawg\",\n                  \"author\": {\n                    \"userLogin\": \"kdrews34\"\n                  },\n                  \"createdDate\": \"2019-11-23T22:47:37Z\",\n                  \"filesConnection\": {\n                    \"files\": [\n                      {\n                        \"path\": \"P3Client/src/main/java/RPLS.java\"\n                      },\n                      {\n                        \"path\": \"P3Server/src/main/java/RPLS.java\"\n                      }\n                    ]\n                  }\n                }\n              ]\n            },\n            \"commitComments\": {\n              \"totalCount\": 0\n            }\n          },\n          {\n            \"repoName\": \"CS342_Project5\",\n            \"nameWithOwner\": \"kdrews34/CS342_Project5\",\n            \"createdDate\": \"2019-11-26T05:56:35Z\",\n            \"lastPushed\": \"2019-12-10T00:02:09Z\",\n            \"description\": null,\n            \"primaryLanguage\": {\n              \"language\": \"Java\"\n            },\n            \"owner\": {\n              \"loginName\": \"kdrews34\"\n            },\n            \"forks\": {\n              \"totalCount\": 0\n            },\n            \"languagesConnection\": {\n              \"programingLanguages\": [\n                {\n                  \"language\": \"Java\"\n                }\n              ]\n            },\n            \"stargazersConnection\": {\n              \"totalCount\": 0\n            },\n            \"collaboratorsConnection\": {\n              \"totalCount\": 4,\n              \"collaborators\": [\n                {\n                  \"name\": \"Kevin Andrews\",\n                  \"loginName\": \"kdrews34\"\n                },\n                {\n                  \"name\": \"Alexis Jalomo\",\n                  \"loginName\": \"Jalomo1197\"\n                },\n                {\n                  \"name\": \"Deividas Mickevicius\",\n                  \"loginName\": \"davidmickev\"\n                },\n                {\n                  \"name\": null,\n                  \"loginName\": \"hthayyil\"\n                }\n              ]\n            },\n            \"pullRequestsConnection\": {\n              \"totalCount\": 0,\n              \"pullRequestsList\": []\n            },\n            \"commitComments\": {\n              \"totalCount\": 0\n            }\n          },\n          {\n            \"repoName\": \"Design-Pattern-Code-Generator\",\n            \"nameWithOwner\": \"Jalomo1197/Design-Pattern-Code-Generator\",\n            \"createdDate\": \"2020-04-24T19:27:53Z\",\n            \"lastPushed\": \"2020-04-24T19:33:16Z\",\n            \"description\": \"IntelliJ plugin program that generates the implementation code of supported design patterns, which is inserted into the user’s project. Users can enhance the design before it is inserted. Such modifications include adding methods, adding fields, or adding implementations of interfaces. Used the JavaParser library to create compilation units containing the requested design. Used Logback and SLFL4J for logging. \",\n            \"primaryLanguage\": {\n              \"language\": \"Java\"\n            },\n            \"owner\": {\n              \"loginName\": \"Jalomo1197\"\n            },\n            \"forks\": {\n              \"totalCount\": 0\n            },\n            \"languagesConnection\": {\n              \"programingLanguages\": [\n                {\n                  \"language\": \"Assembly\"\n                },\n                {\n                  \"language\": \"Java\"\n                }\n              ]\n            },\n            \"stargazersConnection\": {\n              \"totalCount\": 0\n            },\n            \"collaboratorsConnection\": {\n              \"totalCount\": 1,\n              \"collaborators\": [\n                {\n                  \"name\": \"Alexis Jalomo\",\n                  \"loginName\": \"Jalomo1197\"\n                }\n              ]\n            },\n            \"pullRequestsConnection\": {\n              \"totalCount\": 0,\n              \"pullRequestsList\": []\n            },\n            \"commitComments\": {\n              \"totalCount\": 0\n            }\n          },\n          {\n            \"repoName\": \"LED_Flow\",\n            \"nameWithOwner\": \"Jalomo1197/LED_Flow\",\n            \"createdDate\": \"2020-04-25T00:14:53Z\",\n            \"lastPushed\": \"2020-04-25T01:31:27Z\",\n            \"description\": \"The idea is to create a Master Writer/Slave Receiver configuration which will allow each individually programmable LED strip to synchronize to the beat of music playing via a speaker while reducing any noise in the environment. The Master Writer/Slave Receiver configuration via the i2c protocol will be connected to the bluetooth speaker, two unit controlled strip LEDs which concurrently light up with the beat/bass of the music being outputted through the speaker recorded by Piezo vibration sensor, and the synchronization mode will be controlled in a separate unit via the user through a button system.\",\n            \"primaryLanguage\": {\n              \"language\": \"C++\"\n            },\n            \"owner\": {\n              \"loginName\": \"Jalomo1197\"\n            },\n            \"forks\": {\n              \"totalCount\": 0\n            },\n            \"languagesConnection\": {\n              \"programingLanguages\": [\n                {\n                  \"language\": \"C++\"\n                }\n              ]\n            },\n            \"stargazersConnection\": {\n              \"totalCount\": 0\n            },\n            \"collaboratorsConnection\": {\n              \"totalCount\": 1,\n              \"collaborators\": [\n                {\n                  \"name\": \"Alexis Jalomo\",\n                  \"loginName\": \"Jalomo1197\"\n                }\n              ]\n            },\n            \"pullRequestsConnection\": {\n              \"totalCount\": 0,\n              \"pullRequestsList\": []\n            },\n            \"commitComments\": {\n              \"totalCount\": 0\n            }\n          },\n          {\n            \"repoName\": \"ClientGitHubGraphQL\",\n            \"nameWithOwner\": \"Jalomo1197/ClientGitHubGraphQL\",\n            \"createdDate\": \"2020-04-25T02:50:58Z\",\n            \"lastPushed\": \"2020-04-25T02:55:12Z\",\n            \"description\": \"A object-oriented pure functional design and implementation of a GraphQL client framework for GitHub. The framework composes and executes external GraphQL commands from Scala client programs. It obtains and processes the results of these executions.\",\n            \"primaryLanguage\": {\n              \"language\": \"Scala\"\n            },\n            \"owner\": {\n              \"loginName\": \"Jalomo1197\"\n            },\n            \"forks\": {\n              \"totalCount\": 0\n            },\n            \"languagesConnection\": {\n              \"programingLanguages\": [\n                {\n                  \"language\": \"Scala\"\n                }\n              ]\n            },\n            \"stargazersConnection\": {\n              \"totalCount\": 0\n            },\n            \"collaboratorsConnection\": {\n              \"totalCount\": 1,\n              \"collaborators\": [\n                {\n                  \"name\": \"Alexis Jalomo\",\n                  \"loginName\": \"Jalomo1197\"\n                }\n              ]\n            },\n            \"pullRequestsConnection\": {\n              \"totalCount\": 0,\n              \"pullRequestsList\": []\n            },\n            \"commitComments\": {\n              \"totalCount\": 0\n            }\n          }\n        ]\n      }\n    }\n  }\n}"


      val t = JSONParser.getUserOwnRepo(respJson2)
      t.foreach(a => print(a.repoName + "\n"))

    }
  }
}